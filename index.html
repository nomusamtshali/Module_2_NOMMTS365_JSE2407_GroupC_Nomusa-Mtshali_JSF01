<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="theme-color" content="#ffffff" />

    <!-- Primary Meta Tags -->
    <title>SwiftCart — The fastest e-commerce store in SA</title>
    <meta
      name="title"
      content="SwiftCart — The fastest e-commerce store in SA"
    />
    <meta
      name="description"
      content="Discover SwiftCart, South Africa's fastest e-commerce store, offering lightning-fast shopping experiences. Shop now for top brands and exclusive deals, with swift delivery nationwide. Experience seamless browsing, secure transactions, and exceptional customer service at SwiftCart today"
    />

    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body>
    <!-- Header -->
    <header x-data="header()" class="sticky z-50 top-0">
      <nav class="bg-gray-500 border-gray-200">
        <div
          class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4"
        >
          <a href="/">
            <button class="flex items-center space-x-3 rtl:space-x-reverse">
              <img
                src="./assets/online-shop.png"
                class="h-8"
                alt="Flowbite Logo"
              />
              <span
                class="self-center text-2xl font-semibold whitespace-nowrap text-white"
              >
                SwiftCart
              </span>
            </button>
          </a>

          <button
            @click="toggleNavbar"
            class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-white rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200"
            aria-controls="navbar-dropdown"
            aria-expanded="false"
          >
            <span class="sr-only">Open main menu</span>
            <svg
              class="w-5 h-5"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 17 14"
            >
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M1 1h15M1 7h15M1 13h15"
              />
            </svg>
          </button>

          <div
            :class="{ 'hidden': isNavbarHidden }"
            class="w-full md:block md:w-auto"
            id="navbar-dropdown"
          >
            <ul
              class="flex flex-col md:flex-row font-medium p-4 md:p-0 mt-4 md:mt-0 border border-gray-100 rounded-lg bg-gray-500 md:space-x-8 rtl:space-x-reverse md:border-0"
            >
              <li>
                <a
                  href="#"
                  class="block py-2 px-3 text-white rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0"
                >
                  Wishlist
                </a>
              </li>
              <li class="hidden lg:block md:block relative">
                <a href="#">
                  <div class="t-0 absolute left-3 -top-4">
                    <p
                      class="flex h-2 w-2 items-center justify-center rounded-full bg-red-500 p-3 text-xs text-white"
                    >
                      2
                    </p>
                  </div>

                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="h-6 w-6 stroke-white cursor-pointer"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"
                    />
                  </svg>
                </a>
              </li>

              <li>
                <a
                  href="#"
                  class="lg:hidden md:hidden py-2 px-3 text-white rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0"
                >
                  Cart
                </a>
              </li>

              <li>
                <a
                  href="login"
                  class="block py-2 px-3 text-white rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0"
                >
                  Login
                </a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <main x-data="app()" x-init="init()" class="container mx-auto mt-8">
      <div
        class="grid lg:flex gap-y-4 gap-x-48 lg:items-start mt-3 mx-auto justify-center"
      >
        <!-- Filter  -->
        <div x-data="filter()" x-init="initializeCategories()">
          <form>
            <div class="flex lg:w-[31.25rem] sm:w-[95%] md:w-full relative">
              <button
                @click.prevent="toggleDropdown"
                id="dropdown-button"
                class="flex-shrink-0 z-10 inline-flex items-center py-2.5 px-4 text-sm font-medium text-center text-gray-900 bg-gray-100 border border-gray-300 rounded-s-lg hover:bg-gray-200"
                type="button"
                x-text="filterItem"
              >
                <svg
                  class="w-2.5 h-2.5 ms-2.5"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 10 6"
                >
                  <path
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="m1 1 4 4 4-4"
                  />
                </svg>
              </button>
              <div
                id="dropdown"
                class="z-10 absolute top-[100%] hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44"
                :class="{ 'hidden': !dropdownOpen }"
              >
                <ul
                  class="py-2 text-sm text-gray-700"
                  aria-labelledby="dropdown-button"
                >
                  <li
                    @click="handleFilter('All categories')"
                    class="inline-flex w-full px-4 py-2 hover:bg-gray-100"
                  >
                    All categories
                  </li>
                  <template x-for="category in categories" :key="category">
                    <li>
                      <button
                        @click="handleFilter(category)"
                        type="button"
                        class="inline-flex w-full px-4 py-2 hover:bg-gray-100"
                        x-text="category"
                      ></button>
                    </li>
                  </template>
                </ul>
              </div>

              <div class="relative w-full max-w-xs">
                <input
                  type="search"
                  id="search-dropdown"
                  name="searchInput"
                  class="p-2.5 w-full z-20 text-sm text-gray-900 bg-gray-50 rounded-e-lg border-s-gray-50 border-s-2 border border-gray-300 focus:ring-blue-500 focus:border-blue-500"
                  placeholder="Search products..."
                  x-model="searchTerm"
                  @input="handleSearch"
                />
                <button
                  type="submit"
                  class="absolute top-0 end-0 p-2.5 text-sm font-medium h-full text-white bg-blue-700 rounded-e-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300"
                >
                  <svg
                    class="w-4 h-4"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 20 20"
                  >
                    <path
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
                    />
                  </svg>

                  <span class="sr-only">Search</span>
                </button>
              </div>
            </div>
          </form>
        </div>

        <!-- Sort Component -->
        <div x-data="sort()" class="flex sm:w-[95%] max-w-[21rem] md:w-full">
          <label for="sort" class="w-20 my-auto font-semibold">Sort by: </label>
          <select
            x-model="sorting"
            @change="handleSort"
            id="sort"
            class="p-2.5 w-full max-w-[21rem] text-sm text-gray-900 bg-gray-50 border-s-2 border border-gray-300 focus:ring-blue-500 focus:border-blue-500"
          >
            <option value="default">Default</option>
            <option value="low">Price: Low to High</option>
            <option value="high">Price: High to Low</option>
          </select>
        </div>
      </div>

     <!-- Products Display -->
<div class="container mx-auto px-4 py-8"> <!-- Added container and padding -->
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">

    <template x-if="loading">
        <template x-for="i in 20" :key="i">
          <div
            role="status"
            class="bg-white max-w-sm p-4 border border-gray-200 rounded shadow animate-pulse md:p-6 dark:border-gray-700"
          >
            <!-- CardSkeleton content -->
            <div
              class="flex items-center justify-center h-48 mb-4 bg-gray-300 rounded dark:bg-gray-700"
            >
              <svg
                class="w-10 h-10 text-gray-200 dark:text-gray-600"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="currentColor"
                viewBox="0 0 16 20"
              >
                <path
                  d="M14.066 0H7v5a2 2 0 0 1-2 2H0v11a1.97 1.97 0 0 0 1.934 2h12.132A1.97 1.97 0 0 0 16 18V2a1.97 1.97 0 0 0-1.934-2ZM10.5 6a1.5 1.5 0 1 1 0 2.999A1.5 1.5 0 0 1 10.5 6Zm2.221 10.515a1 1 0 0 1-.858.485h-8a1 1 0 0 1-.9-1.43L5.6 10.039a.978.978 0 0 1 .936-.57 1 1 0 0 1 .9.632l1.181 2.981.541-1a.945.945 0 0 1 .883-.522 1 1 0 0 1 .879.529l1.832 3.438a1 1 0 0 1-.031.988Z"
                />
                <path
                  d="M5 5V.13a2.96 2.96 0 0 0-1.293.749L.879 3.707A2.98 2.98 0 0 0 .13 5H5Z"
                />
              </svg>
            </div>
            <div
              class="h-2 bg-gray-200 rounded-full dark:bg-gray-700 mb-2.5"
            ></div>
            <div
              class="h-2.5 bg-gray-200 rounded-full dark:bg-gray-700 w-48 mb-4"
            ></div>
            <div
              class="h-2.5 bg-gray-200 rounded-full dark:bg-gray-700 w-10 mb-4"
            ></div>
            <span class="sr-only">Loading...</span>
          </div>
        </template>
      </template>

      <template x-if="error">
        <div
          class="mt-28 text-red-500 text-xl font-bold"
          x-text="error"
        ></div>
      </template>
      
    <!-- Product card -->
    <template
      x-if="!loading && !error"
      x-for="product in filteredProducts"
      :key="product.id"
    >
      <div
        @click="openModal(product)"
        class="flex flex-col h-full bg-white border border-slate-200 shadow shadow-slate-950/5 rounded-2xl overflow-hidden hover:-translate-y-1 hover:scale-105 transition duration-300"
      >
        <div class="p-4 flex items-center justify-center h-48">
          <img
            class="object-contain h-full w-full"
            :src="product.image"
            :alt="product.title"
          />
        </div>
        <div class="flex-1 flex flex-col p-4">
          <div class="flex-1">
            <header class="mb-2">
              <h2 class="text-lg font-extrabold leading-snug line-clamp-2">
                <div
                  class="text-slate-600 focus-visible:outline-none focus-visible:ring focus-visible:ring-indigo-300"
                  x-text="product.title"
                ></div>
              </h2>
            </header>

            <!-- Ratings -->
            <div
              x-data="{ stars: Math.round(product.rating.rate) }"
              class="flex items-center mb-2"
            >
              <template x-for="i in 5">
                <svg
                  class="w-4 h-4 mr-1"
                  :class="i <= stars ? 'text-yellow-300' : 'text-gray-300'"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 22 20"
                >
                  <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z" />
                </svg>
              </template>
            </div>

            <div class="text-base font-extrabold text-slate-500 leading-snug mb-4">
              <h2 x-text="`$${product.price}`"></h2>
            </div>
          </div>

          <div class="flex items-center justify-between mt-auto">
            <span
              class="inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10"
              x-text="product.category"
            ></span>

            <div class="flex items-center space-x-2">
              <button @click.stop="addToFavorites(product)" class="p-1">
                <svg
                  class="h-5 w-5 hover:fill-red-500"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  fill="none"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12.01 6.001C6.5 1 1 8 5.782 13.001L12.011 20l6.23-7C23 8 17.5 1 12.01 6.002Z"
                  />
                </svg>
              </button>
              <button
                @click.stop="addToCart(product)"
                class="inline-flex justify-center whitespace-nowrap rounded-lg bg-cyan-700 px-3 py-2 text-sm font-medium text-white hover:bg-cyan-900 focus-visible:outline-none focus-visible:ring focus-visible:ring-indigo-300 transition-colors"
              >
                Add To Cart
              </button>
            </div>
          </div>
        </div>
      </div>
    </template>
  </div>
</div>
      <!-- Modal -->
      <div
        x-show="showModal"
        x-transition
        class="fixed inset-0 z-50 overflow-y-auto"
        aria-labelledby="modal-title"
        role="dialog"
        aria-modal="true"
      >
        <div
          class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"
        >
          <div
            x-show="showModal"
            x-transition.opacity
            class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"
          ></div>
          <span
            class="hidden sm:inline-block sm:align-middle sm:h-screen"
            aria-hidden="true"
            >&#8203;</span
          >
          <div
            x-show="showModal"
            x-transition.transform
            class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"
          >
            <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
              <div class="sm:flex sm:items-start">
                <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                  <h3
                    class="text-lg leading-6 font-medium text-gray-900"
                    id="modal-title"
                    x-text="modalProduct.title"
                  ></h3>
                  <div class="mt-2">
                    <img
                      class="object-contain h-48 w-full"
                      :src="modalProduct.image"
                      :alt="modalProduct.title"
                    />
                    <p class="text-sm text-gray-500 mt-4" x-text="modalProduct.description"></p>
                    <p class="text-lg font-bold mt-4" x-text="`$${modalProduct.price}`"></p>
                    <div class="flex items-center mt-2">
                      <template x-for="i in 5">
                        <svg
                          class="w-4 h-4 text-gray-300"
                          :class="i <= Math.round(modalProduct.rating.rate) ? 'text-yellow-300' : 'text-gray-300'"
                          aria-hidden="true"
                          xmlns="http://www.w3.org/2000/svg"
                          fill="currentColor"
                          viewBox="0 0 22 20"
                        >
                          <path
                            d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"
                          />
                        </svg>
                      </template>
                      <span class="text-sm text-gray-500 ml-2" x-text="`${modalProduct.rating.count} reviews`"></span>
                    </div>
                    <span
                      class="inline-flex items-center mt-4 rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10"
                      x-text="modalProduct.category"
                    ></span>
                    <button
                      @click.stop="addToCart(modalProduct)"
                      class="inline-flex justify-center mt-4 whitespace-nowrap rounded-lg bg-cyan-700 px-3 py-2 text-sm font-medium text-white hover:bg-cyan-900 focus-visible:outline-none focus-visible:ring focus-visible:ring-indigo-300 transition-colors"
                    >
                      Add To Cart
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
              <button
                @click="closeModal()"
                type="button"
                class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      function header() {
        return {
          isNavbarHidden: true,
          toggleNavbar() {
            this.isNavbarHidden = !this.isNavbarHidden;
          },
        };
      }
    </script>

    <script>
      function app() {
        return {
          products: [],
          filteredProducts: [],
          categories: [],
          cartItems: [],
          loading: true,
          error: null,
          filterItem: "All categories",
          searchTerm: "",
          sorting: "default",
          dropdownOpen: false,
          showModal: false,
          modalProduct: {},

          async init() {
            await this.fetchProducts();
            await this.fetchCategories();
          },

          async fetchProducts() {
            try {
              const response = await fetch("https://fakestoreapi.com/products");
              if (!response.ok) throw new Error("Failed to fetch products");
              this.products = await response.json();
              this.filteredProducts = [...this.products];
              this.loading = false;
            } catch (error) {
              this.error = error.message;
              this.loading = false;
            }
          },

          async fetchCategories() {
            try {
              const response = await fetch(
                "https://fakestoreapi.com/products/categories"
              );
              if (!response.ok) throw new Error("Failed to fetch categories");
              this.categories = await response.json();
            } catch (error) {
              console.error("Failed to fetch categories:", error);
            }
          },

          toggleDropdown() {
            this.dropdownOpen = !this.dropdownOpen;
          },

          handleFilter(category) {
            this.filterItem = category;
            this.dropdownOpen = false;
            this.applyFilters();
          },

          handleSearch() {
            this.applyFilters();
          },

          handleSort() {
            this.applyFilters();
          },

          applyFilters() {
            let filtered = [...this.products];

            // Apply category filter
            if (this.filterItem !== "All categories") {
              filtered = filtered.filter(
                (product) => product.category === this.filterItem
              );
            }

            // Apply search filter
            if (this.searchTerm) {
              const searchLower = this.searchTerm.toLowerCase();
              filtered = filtered.filter(
                (product) =>
                  product.title.toLowerCase().includes(searchLower) ||
                  product.description.toLowerCase().includes(searchLower)
              );
            }

            // Apply sorting
            switch (this.sorting) {
              case "low":
                filtered.sort((a, b) => a.price - b.price);
                break;
              case "high":
                filtered.sort((a, b) => b.price - a.price);
                break;
              default:
                // Do nothing for default sorting
                break;
            }

            this.filteredProducts = filtered;
          },

          addToFavorites(product) {
            // Implement favorites logic here
            console.log("Added to favorites:", product);
          },

          addToCart(product) {
            this.cartItems.push(product);
            console.log("Added to cart:", product);
          },

          openModal(product) {
            this.modalProduct = product;
            this.showModal = true;
          },

          closeModal() {
            this.showModal = false;
            this.modalProduct = {};
          },
        };
      }

      function filter() {
        return {
          // Filter component logic is now integrated into the main app() function
        };
      }

      function sort() {
        return {
          // Sort component logic is now integrated into the main app() function
        };
      }
    </script>
  </body>
</html>
